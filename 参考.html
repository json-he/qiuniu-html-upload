<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

	<head th:include="commonTemplate :: header">
	</head>

	<body>
		<style type="text/css">
			#editor-trigger {
				height: 1000px;
				/*max-height: 500px;*/
			}
			a{
				color: rgb(28, 128, 229);
			}
			.container {
				width: 100%;
				margin: 0 auto;
				position: relative;
			}
			
			.wrapper {
				float: left;
				padding: 0 30px;
				border: 1px solid #dbdbdb;
				margin-top: 10px;
				background: #fff;
			}
			
			.wrapper-header {
				position:relative;
				height: 58px;
				line-height: 58px;
				pading: 10px;
				border-bottom: 1px solid #dbdbdb;
				margin-bottom: 10px;
			}
			
			.content-top {
				overflow: hidden;
				background: #f2f9fe;
				padding: 20px;
				color: #666;
				width:910px;
			}
			
			.content-topLeft {
				float: left;
				width: 510px;
				min-height: 238px;
				background: #fff;
				border: 1px #dbdbdb solid;
				margin-right: 10px;
			}
				.content-topLeft img{
					max-width: 510px;
					margin: 10px 0;
					display: block;
				}
			
			.content-topRight {
				width: 300px;
				min-height: 258px;
				background: #fff;
				border: 1px #eee solid;
				float: left;
				border: 1px solid #dbdbdb;
				background: #fff;
				padding: 10px 20px;
				text-align: left;
			}
			.content-moreMess{
				margin-top: 20px;
				padding: 20px;
				float: left;
				width: 545px;
				background: #fff;
				border: 1px #dbdbdb solid;
			}
				.content-moreMess .more{
					float: right;
					color: #0093f3;
					display: inline-block;
					cursor: pointer;
				}
				.more-content{
					margin-top: 15px;
					width: 100%;
				}
					.more-content span{
						display: block;
						line-height: 20px;
						width: 100%;
					}
			.urgent {
				text-align: center;
				display: inline-block;
				font-size: 14px;
				width: 42px;
				line-height: 20px;
				border: 1px #00c341 solid;
				border-radius: 18px;
				color: #00c341;
			}
			
			.state {
				color: #0093f3;
				float: right;
			}
			
			.content-bottom {
				padding: 20px;
				width: 585px;
				float: left;
				color: #666;
				padding-bottom:80px;
			}
			
			.content-bottomHead {
				width: 100%;
				height: 30px;
				border-bottom: 1px #dbdbdb solid;
			}
			
			.icip_table {
				width: 100%;
			}
			
			.col2 {
				border-bottom: 1px #dbdbdb solid;
			}
			
			.repHeader .time {
				font-size: 14px;
			}
			
			.repContent {
				margin: 5px 0;
			}
				.repContent img{
					display: block;
					max-width: 576px;
					margin: 10px 0;
					
				}
			
		.list-tableTitle{
			margin: 0;
			padding: 0;
			list-style: none;
			height: 45px;
		}
			.list-tableTitle li{
				height: 45px;
				line-height:45px;
				float: left;
				padding: 0 40px;
			}
		.list-tableContent{
			margin: 0;
			padding: 0;
			list-style: none;
			overflow-y: auto;
		}
			.list-tableContent li{
				width: 100%;
				float: left;
				height: 40px;
				line-height: 40px;
				border-bottom: 1px #dbdbdb solid;
			}
			.list-tableContent li span{
				padding: 0 30px;
				float:left;
				min-width:200px;
				text-align: left;
			}
			.list-tableContent li .check{
				float: right;
				margin-top: 10px;
				padding: 0;
				height: 20px;
				line-height: 20px;
				text-align: center;
				width: 20px;
				min-width:0px;
				border: 1px #e0e0e3 solid;
				border-radius: 50%;
			}
			.list-tableContent li .checked{
				float: right;
				margin-top: 10px;
				padding: 0;
				height: 20px;
				line-height: 20px;
				text-align: center;
				width: 20px;
				min-width:0px;
				color:#fff;
				background:#2193f3;
				border-radius: 50%;
			}
			.searchIpt{
			margin: 10px auto;
			background: none;
			border: 1px #dbdbdb solid;
			padding: 5px;
			width: 300px;
			height: 20px;
		}
		.searchBtn{
			width: 80px;
			height: 30px;
			background: #2193f3;
			color: #fff;
			border: none;
			cursor: pointer;
		}
		</style>
		<div id="page">
			<div th:include="commonTemplate :: headerDiv"></div>
			<div id="content" class="layout">
				<div class="grid-s5m0">
					<!-- ============================= 页面内容 开始============================= -->
					<div class="col-main">
						<div>
							<div class="skin-box" style="background:#fff">
								<div class="skin-box-bd">
									<div class="cur-position">
										<span><a href="javascript:void(0);">问答管理</a> </span>
										<span>&gt;</span>
										<span><a th:href="@{workServer/myList.ht}">工单管理</a> </span>
									</div>
									<form th:action="@{workServer/myDetail.ht}" id="frm" name="frm" method="post">
										<div><input type="hidden" name="worNo" id="worNo" th:value="${workOrderInfoVo.workOrdNo}" /></div>
										<div class="icip_content_box" style="border:0px;">
											<div class="list-table">
												<div class="wrapper">
													<div class="wrapper-header">
														<div class="icip_title_box">
															<div class="left" style="float: left; padding: 0 10px; font-size: 20px;">
																<span class="icip_title_text">工单详情</span>
															</div>
															<div class="left" style="float: left; padding: 0 10px;">
																<span class="icip_button" th:onclick="'locationHref(\'' + @{/workServer/myList.ht} + '\')'">返回上级</span>
															</div>
														</div>
														<div class="redbutton control-button JsW" style="overflow: hidden;position: absolute;top: 0;right: 10px;" data-control-type="button" data-control-config="{'buttonCls':'button'}">
															<span style="float: right; margin-top: 14px;">
															<input  th:if="${workOrderInfoVo.isProcessType &amp;&amp; workOrderInfoVo.workOrdStatus=='02'}" type="button" style=" padding: 5px 10px; border: 1px #dbdbdb solid; background: #f5f5f5;cursor: pointer;"  value="我已处理"  th:onclick="'dealWorkOrder()'"/></span>
															<span th:if="${workOrderInfoVo.workOrdStatus !='04'}" class="grey" style="float: right; margin-top: 14px; margin-right: 10px;"> <input style=" padding: 5px 10px; border: 1px #dbdbdb solid; background: #f5f5f5;;cursor: pointer;" value="转交" onclick="changeFollowName1();"  type="button" /> </span>
														</div>
													</div>
													<div class="content-top">
														<div class="content-topLeft" style="padding:20px;">
															<span th:utext="${workOrderInfoVo.workOrdInfo}"></span>
															<div th:if="${workOrderInfoVo.personalList!=null &amp;&amp; workOrderInfoVo.personalList.size() > 0}">
																<br />
																<div th:each="personal : ${workOrderInfoVo.personalList}">
																		<div>
																			<span class="company-name">公司简称:</span>
																			<span class="company-content" th:text="${personal.companyName}">dsadfsa</span>
																		</div>	
																		<div>
																			<span>二级域名:</span>
																			<span th:text="${personal.SLD}"></span>
																		</div>
																		<div>
																			<span>企业文化:</span>
																			<span  th:text="${personal.slogan}"></span>
																		</div>
																		<div>
																			<span>公司logo:</span>
																			<span> <img th:if="!${#strings.isEmpty(personal.companyIcon)}" th:attr="src=${personal.companyIcon}" /></span>
																		</div>
																		<div>
																			<span>智慧社区管理平台背景:</span>
																			<span> <img th:if="!${#strings.isEmpty(personal.BMSImg)}" th:attr="src=${personal.BMSImg}" /></span>
																		</div>
																		<div>
																			<span>物业收费系统背景:</span>
																			<span> <img th:if="!${#strings.isEmpty(personal.SFImg)}" th:attr="src=${personal.SFImg}" /></span>
																		</div>
																		<div>
																			<span>定制周期(月):</span>
																			<span th:text="${personal.cycle}"></span>
																		</div>
																</div>
															</div>
														</div>
														<div class="content-topRight">
															<table align="left" style="width: 100%;">
																<tr style="margin-bottom: 10px; line-height: 40px;">
																	<td colspan="2">
																		<span class="urgent" th:if="${workOrderInfoVo.workOrdLevel=='02'}">加急</span>
																		<span class="require red"></span><span>工单信息</span>
																		<span class="state" bms:dict="workOrdStatus,${workOrderInfoVo.workOrdStatus}"></span>
																	</td>
																</tr>
																<tr>
																	<td>
																		<span>工单号：</span>
																	</td>
																	<td>
																		<span th:text="${#strings.substring(workOrderInfoVo.workOrdNo,#strings.length(workOrderInfoVo.workOrdNo)-6,#strings.length(workOrderInfoVo.workOrdNo))}"></span>
																	</td>
																</tr>
																<tr>
																	<td>
																		<span>创建时间：</span>
																	</td>
																	<td>
																		<span bms:fmt="yyyy-MM-dd HH:mm:ss,${workOrderInfoVo.submitTime}"></span>
																	</td>
																</tr>
																<tr>
																	<td>
																		<span>创建人：</span>
																	</td>
																	<td>
																		<span th:text="${workOrderInfoVo.authorName}"></span>
																	</td>
																</tr>
																<tr>
																	<td>
																		<span>所属公司：</span>
																	</td>
																	<td>
																		<span th:text="${workOrderInfoVo.authorCompany}"></span>
																	</td>
																</tr>
																<tr>
																	<td>
																		<span>类型：</span>
																	</td>
																	<td>
																		<span bms:dict="workOrderType,${workOrderInfoVo.workOrdType}"></span>
																	</td>
																</tr>
																<tr>
																	<td>
																		<span>服务：</span>
																	</td>
																	<td>
																		<span th:text="${workOrderInfoVo.workOrdServName}"></span>
																	</td>
																</tr>
															</table>
														</div>
														<div class="content-moreMess" th:if="${workOrderInfoVo.workOrdExtraList != null &amp;&amp; workOrderInfoVo.workOrdExtraList.size() > 0}">
															<div class="title">
																<span>数据信息</span>
																<a class="more" href="javascript:void(0);" th:onclick="'tomore()'" th:if="${workOrderInfoVo.workOrdExtraList.size() &lt; workOrderInfoVo.extraCount}">查看更多 </a>
															</div>
															<div class="more-content">
																<span th:each="res : ${workOrderInfoVo.workOrdExtraList}"  th:utext="${res}" > </span>
															</div>
														</div>
													</div>
													<div class="content-bottom">
														<div class="content-bottomHead">
															<span style="float: left;">工单服务记录</span>
															<span style="float: right;">共<span th:text="${pageResult.total}"></span>条</span>
														</div>
														<table class="icip_table" th:if="${pageResult.list!=null &amp;&amp; pageResult.list.size()>0}">
															<tr onmouseover="javascript:this.style.background='#e3f1ff'" onmouseout="javascript:this.style.background='#fff'" th:each="orderInfoReply : ${pageResult.list}" >
																<td class="col2" style="text-align:left; font-size: 16px;">
																	<div class="repHeader">
																		<span th:if="${orderInfoReply.replyType=='02'}">服务区</span>
																		<span th:if="${orderInfoReply.replyType=='01'}">客&nbsp;&nbsp;&nbsp;户</span>
																		&nbsp;&nbsp;&nbsp;
																		<span  class="time" bms:fmt="yyyy-MM-dd HH:mm:ss,${orderInfoReply.updateTime}"></span>
																	</div>
																	<div class="repContent">
																		<span th:utext="${orderInfoReply.replyContent}"></span>
																	</div>
																</td>
															</tr>
															<tr th:if="${pageResult.list!=null &amp;&amp; pageResult.list.size()>0}">
																<td class="col2" style="text-align:left; font-size: 16px;">
																	<div class="right" th:if="${pageResult != null}" th:object="${pageResult}">
													                    <span  th:if="${pageResult.pageSize != null}" class="icip_btn_more"  th:object="${pageResult}">
													                    <input id="pageSize" name="pageSize" type="hidden" th:value="${pageResult.pageSize}"></input>
													                   </span>
													                   <span>
													                  	<span name="pageNum" id="pagenumber" th:text="*{pageNum == 0} ? 1 : *{pageNum}"></span><span>页</span>
													                  	<input type="hidden" name="pageNum" id="pagenumberHidden"  th:value="*{pageNum == 0} ? 1 : *{pageNum}"/>
													                  	/
													                    <span id="_pages" th:text="*{pages == 0} ? 1 : *{pages}"></span><span>页</span>
													                   </span>
													                   <span class="icip_aspect_wrap">
													                       <span class="icip_button icip_iconfont icip_aspect">
													                        <a href="javascript:void(0);" th:onclick="*{hasPreviousPage} ? 'go(' + *{prePage} + ')' : 'return false;'" title="点击查看上一页">&#xe624;</a> 
													                       </span>
													                       <span class="icip_button icip_iconfont icip_aspect">
													                        <a href="javascript:void(0);" th:onclick="*{hasNextPage} ? 'go(' + *{nextPage} + ')' : 'return false;'" title="点击查看下一页">&#xe625;</a> 
													                       </span>
													                   </span>
													               </div>
																</td>
															</tr>
														</table>
														
														<div th:if="${workOrderInfoVo.workOrdStatus !='04'}" id="editor-container" class="container">
															<div style="height:356px; width: 100%;" id="editor-trigger">
															</div>
															<input type="hidden " name="replyContent" id="replyContent" />
															<span class="grey" style="float: right; margin-top: 14px; margin-right: 10px;"> 
															<input style=" padding: 5px 10px; border: 1px #dbdbdb solid; background: #f5f5f5;" 
															value="回复工单" onclick="replyWorkOrder();" 	type="button" class="radius5 button ks-pop-close1" /> 
															</span>
														</div>
													</div>
												</div>
											</div>
										</div>
									</form>
								</div>
							</div>
							<div id="bg " style="position:fixed;display:none;top:0;left:0;background-color:#000;width:100%;height:100%;opacity:0.3; z-index: 1000;"></div>
							<div id="workerModel " class="icip_content_box " style=" display:none;z-index:10000;width:70%;overflow-y:auto;overflow-x:hidden;text-align:center;position:absolute;top:5%;left:10%;background-color:#fff;border:1px solid #dbdbdb; ">
								<div  style="text-align:center;font-size:16px;height: 50px; line-height: 50px; border-bottom: 1px #dbdbdb solid;" >转交
									<span class="grey " style="float:right; "> 
									<input  style="color: #000;background: none; cursor: pointer; border: none; width: 30px; margin-top: 10px; line-height: 30px; height: 30px; font-size: 30px; color: #999;"  value="×" onclick="closeModel() "  type="button" class="radius5 button ks-pop-close1 " /></span>
								</div>
								<div class="list-table ">
									<div class="list-table-cont" style="padding: 0 30px; color: #666;">
										<input type="text" placeholder="请输入姓名" class="searchIpt" id="eName"/>
										<input type="button" value="搜索" class="searchBtn" onclick="queryByName()"/>
										<div class="table2 ">
											<table class="icip_table">
												<tbody id="proListTbody">
													
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- ============================= 页面内容 结束============================= -->
					<div th:include="commonTemplate :: leftMenus"></div>
				</div>
			</div>
			<div th:include="commonTemplate :: footer"></div>
		</div>
	<link rel="stylesheet" type="text/css" th:href="@{css/wangEditor.min.css}" />
	<script type="text/javascript" th:src="@{js/wangEditor.js}"></script>
	<script type="text/javascript" th:src="@{js/art-template-4.9.1.js}"></script>
	<script type="text/javascript" th:src="@{js/plugins/file/plupload/plupload.full.min.js}"></script>
	<script type="text/javascript" th:src="@{js/plugins/file/plupload/i18n/zh_CN.js}"></script>
	<script type="text/javascript" th:src="@{js/qiniu.js}"></script>
	
	<script th:inline="javascript">
	 $(document).ready(function(){
 		 //工单详情和工单回复带连接的设置为新页面打开
 		$(".content-topLeft a").each(function(){$(this).attr({"target":"_blank"})});
 		$(".content-bottom a").each(function(){$(this).attr({"target":"_blank"})});
 	 });   
	
	function replyWorkOrder(){
		/*<![CDATA[*/
		//判断非空不能用==""的方式判断
		var flag= false;
		var str = editor.$txt.html();
		str = str.replace(/\&nbsp\;/g,"");
		str = str.replace(/\ /g,"");
		str = str.replace(/<p><\/p>/g,"");
		str = str.replace(/<p><br><\/p>/g,"");
		if(""!=str){
			flag =true;
		}
		if(!flag){
			_alert("回复内容不能为空!");
			return;
		}
		$("#replyContent").val(editor.$txt.html());
		var form =  document.getElementById("frm");
		form.action=[[@{'/workServer/reply.ht'}]];
		bmsAjaxForm($("#frm"), function(data){
			 var code = data.messageCode;
			 var message = data.message;
			 _alert(message,function(){
				 var url = [[@{'/workServer/myDetail.ht'}]]+"?worNo="+ $("#worNo").val();
				 locationHref(url);
			 });
			
		});
		/*]]>*/
	}
	
	function dealWorkOrder(){
		/*<![CDATA[*/
		    var msg = "确定已经处理完毕？";
			_confirm("<span style='color:#FE6600'>" + msg + "</span>", function() {
				$("#replyContent").val(editor.$txt.html());
				var form =  document.getElementById("frm");
				form.action=[[@{'/workServer/deal.ht'}]];
				bmsAjaxForm($("#frm"), function(data){
					 var code = data.messageCode;
					 if(message_success_code == code){
						 var message = data.message;
						 var result = data.result;
						 var url =  [[@{/workServer/myDetail.ht}]] + "?worNo=" + $("#worNo").val();
						 locationHref(url);
					 }else{
						 var message = data.message;
						 _alert(message);
					 }
				});
			});
		/*]]>*/
	}

	function changeFollowName1(){
		$.ajax({
			type:"POST",
			url: [[@{'/workServer/getproList.ht'}]],
			dataType:"json",
			success:function(data){
				var proList = data.proList;
				var html = template('proListTemp', {proList:proList});
				$("#proListTbody").empty();
				$("#proListTbody").html(html);
				$("#workerModel").show();
				$("#bg").show();
			}
		});
	}
	
	function queryByName(){
		$.ajax({
			type:"POST",
			url: [[@{'/workServer/getproList.ht'}]],
			dataType:"json",
			data:{eName:$("#eName").val()},
			success:function(data){
				var proList = data.proList;
				var html = template('proListTemp', {proList:proList});
				$("#proListTbody").empty();
				$("#proListTbody").html(html);
			}
		});
	}
	
	function closeModel() {
		$("#workerModel").hide();
		$("#bg").hide();
	}
	
	function setNextFollow(eid,obj){
		/*<![CDATA[*/
		$("span.checked").each(function(){
			$(this).attr("class","check");
		});
		$("#nextEid").val("");
		$(obj).find("span.check").attr("class","checked");
		$("#nextEid").val(eid);
		/*]]>*/
	}
	function changeFollowName(){
		/*<![CDATA[*/
		var nextEid =  $("#nextEid").val();
		if(nextEid==""){
			_alert("请选择转交人!");
			return ;
		}
		 var msg = "确定转交？";
		_confirm("<span style='color:#FE6600'>" + msg + "</span>", function() {
			$.ajax({
				type:"POST",
				url: [[@{'/workServer/change.ht'}]],
				dataType:"json",
				data:{
					eid:$("#nextEid").val(),
					worNo:$("#worNo").val()
				},
				success:function(data){
					var code = data.messageCode;
					if(message_success_code == code){
						 var message = data.message;
						 _alert(message,function(){
							 var url = [[@{/workServer/myList.ht}]] ;
							 locationHref(url);
						});
					} else{
						_alert("请求失败");
					}
				}
			});
		});
		/*]]>*/
	}
	
	function tomore(){
		var url = [[@{/workServer/extramore.ht}]]+ "?worNo=" + $("#worNo").val(); ;
		 locationHref(url);
	}
	
	 /*<![CDATA[*/
	 	           
	 	     // 封装 console.log 函数
        function printLog(title, info) {
            window.console && console.log(title, info);
        }           
		  
     	// 初始化七牛上传
        function uploadInit() {
        	// this 即 editor 对象
            var editor = this;
         	// 触发选择文件的按钮的id
            var btnId = editor.customUploadBtnId;
         	// 触发选择文件的按钮的父容器的id
            var containerId = editor.customUploadContainerId;
            // 创建上传对象
            var uploader = Qiniu.uploader({
                runtimes: 'html5,flash,html4',    //上传模式,依次退化
                browse_button: btnId,       //上传选择的点选按钮，**必需**
                uptoken_url: '/QAMS/fileQiniu/getUptoken.ht',
                    //Ajax请求upToken的Url，**强烈建议设置**（服务端提供）
                // uptoken : '<Your upload token>',
                    //若未指定uptoken_url,则必须指定 uptoken ,uptoken由其他程序生成
                unique_names: false,
                    // 默认 false，key为文件名。若开启该选项，SDK会为每个文件自动生成key（文件名）
                save_key: false,
                    // 默认 false。若在服务端生成uptoken的上传策略中指定了 `sava_key`，则开启，SDK在前端将不对key进行任何处理
                domain: [[${#sysCache.getSysParam('WORK_PERSONALIZED_IMG_URL')}]],
                    //bucket 域名，下载资源时用到，**必需**
                container: containerId,           //上传区域DOM ID，默认是browser_button的父元素，
                max_file_size: '100mb',           //最大文件体积限制
                flash_swf_url: [[@{/js/plugins/file/plupload/Moxie.swf}]],  //引入flash,相对路径
                filters: {
                        mime_types: [
                          //只允许上传图片文件 （注意，extensions中，逗号后面不要加空格）
                          { title: "图片文件", extensions: "jpg,gif,png,bmp"}
                        ]
                },
                multi_selection: false,
                max_retries: 3,                   //上传失败最大重试次数
                dragdrop: true,                   //开启可拖曳上传
                drop_element: 'editor-container',        //拖曳上传区域元素的ID，拖曳文件或文件夹后可触发上传
                chunk_size: '4mb',                //分块上传时，每片的体积
                auto_start: true,                 //选择文件后自动上传，若关闭需要自己绑定事件触发上传
                resize: {
                	crop: false,
                	quality: 50,
                	preserve_headers: false
                },
                init: {
                    'FilesAdded': function(up, files) {
                        plupload.each(files, function(file) {
                            // 文件添加进队列后,处理相关的事情
                            printLog('on FilesAdded');
                        });
                    },
                    'BeforeUpload': function(up, file) {
                        // 每个文件上传前,处理相关的事情
                        printLog('on BeforeUpload');
                    },
                    'UploadProgress': function(up, file) {
                        // 显示进度条
                        editor.showUploadProgress(file.percent);
                    },
                    'FileUploaded': function(up, file, info) {
                        // 每个文件上传成功后,处理相关的事情
                        // 其中 info 是文件上传成功后，服务端返回的json，形式如
                        // {
                        //    "hash": "Fh8xVqod2MQ1mocfI4S4KpRL6D98",
                        //    "key": "gogopher.jpg"
                        //  }
                        printLog(info);
                        // 参考http://developer.qiniu.com/docs/v6/api/overview/up/response/simple-response.html
                        
                        var domain = up.getOption('domain');
                        var res = $.parseJSON(info);
                        var sourceLink = domain + res.key; //获取上传成功后的文件的Url
                        printLog(sourceLink);
                        // 插入图片到editor
                        editor.command(null, 'insertHtml', '<img src="' + sourceLink + '" style="max-width:100%;"/>')
                    },
                    'Error': function(up, err, errTip) {
                        //上传出错时,处理相关的事情
                        printLog('on Error');
                    },
                    'UploadComplete': function() {
                        //队列文件处理完毕后,处理相关的事情
                        printLog('on UploadComplete');
                        // 隐藏进度条
                        editor.hideUploadProgress();
                    },
                    // Key 函数如果有需要自行配置，无特殊需要请注释
                    'Key': function(up, file) {
                        // 若想在前端对每个文件的key进行个性化处理，可以配置该函数
                        // 该配置必须要在 unique_names: false , save_key: false 时才生效
                        var userId = [[${userInfo.userId}]];
                    	var uid = userId.substring(userId.length - 8,userId.length);//员工编号后8位
                    	var ts = (new Date()).valueOf(); 
                    	ts = Math.round(new Date().getTime()/1000).toString();//十位时间戳
                        var key = "image/order/" + uid + "_" + ts + ".png";
                        // do something with key here
                        return key;
                    }
                }
            });
            
            // domain 为七牛空间（bucket)对应的域名，选择某个空间后，可通过"空间设置->基本设置->域名设置"查看获取
            // uploader 为一个plupload对象，继承了所有plupload的方法，参考http://plupload.com/docs
        }     
 	    //创建富文本
 		var editor = new wangEditor('editor-trigger');
 		// 上传图片
        editor.config.customUpload = true;
       	editor.config.customUploadInit = uploadInit;
        editor.config.uploadParams = {
        	isCompress:true
        };
        
        editor.config.emotionsShow = 'value';
        editor.create();
        editor.clear();
        /*]]>*/
	
	</script>
	
	<script th:inline="javascript"  id="proListTemp" type="text/html"> 
		{{if proList.length==0}}
		<ul class="list-tableTitle"  style="border-bottom:1px solid #dbdbdb ">
			<li >
				<span class="red ">没有其他联系人</span>
			</li>
		</ul>
		{{else}}
		<ul class="list-tableTitle"  style="border-bottom:1px solid #dbdbdb ">
			<li >姓名</li>
			<li style="margin-left: 200px;">公司</li>
		</ul>
		<ul class="list-tableContent">
			{{each proList}}
			<li onclick="setNextFollow('{{$value.eid}}',this)">
				<span >{{$value.showName}}</span>
				<span >{{$value.companyName}}</span>
				<span class='check'>√</span>
			</li>
			{{/each}}
			<input type="hidden" id="nextEid" name="nextEid"/>
			<input type="hidden" id="changeWorNo" name="worNo"/>
		</ul>
		<div class="sure" style="margin: 0 auto;  line-height:32px;margin-top: 40px;margin-bottom: 20px; cursor: pointer; width: 85px;height: 32px; color: #fff; background: #0093f3; text-align: center;" onclick="changeFollowName()">确定</div>
		{{/if}}
		 
	</script>
	</body>
</html>